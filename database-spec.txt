DROP TABLE IF EXISTS phoodo_user;
CREATE TABLE phoodo_user(
	user_id		INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	created_on	DATETIME NOT NULL,
	email		VARCHAR(100) NOT NULL,
	pass		VARCHAR(32) NOT NULL,
	verification_code 	VARCHAR(32) NOT NULL,
	verified	BOOLEAN NOT NULL DEFAULT FALSE
);
ALTER TABLE phoodo_user ADD UNIQUE (email);

DROP TABLE IF EXISTS phoodo_user_token;
CREATE TABLE phoodo_user_token(
	token		CHAR(32) NOT NULL PRIMARY KEY,
	created_on	DATETIME NOT NULL,
	valid_until	DATETIME NOT NULL,
	user_id		INT UNSIGNED NOT NULL
);
ALTER TABLE phoodo_user_token ADD INDEX (token);

DROP TABLE IF EXISTS phoodo_category;
CREATE TABLE phoodo_category(
	category_id	INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	created_on	DATETIME NOT NULL,
	user_id		INT UNSIGNED NOT NULL,
	name		VARCHAR(50) NOT NULL
);

DROP TABLE IF EXISTS phoodo_dish;
CREATE TABLE phoodo_dish(
	dish_id		INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	created_on	DATETIME NOT NULL,
	user_id		INT UNSIGNED NOT NULL,
	category_id	INT UNSIGNED NOT NULL,
	name		VARCHAR(100) NOT NULL,
	description	TEXT NOT NULL,
	picture_url	VARCHAR(250) NOT NULL
);

DROP TABLE IF EXISTS phoodo_dish_step;
CREATE TABLE phoodo_dish_step(
	dish_step_id	INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	created_on	DATETIME NOT NULL,
	dish_id		INT UNSIGNED NOT NULL,
	description	TEXT NOT NULL
);
